# Event Horizon Chat üöÄ

**End-to-End Encrypted Messenger Backend** - –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –±—ç–∫–µ–Ω–¥ –¥–ª—è e2ee –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞ —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üîê End-to-End –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —à–∏—Ñ—Ä—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞—Ö
- **‚ö° Real-time Messaging** - WebSocket –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- **üÜî DID-based Identity** - –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **üì± –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **üîÑ Public Key Exchange** - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏
- **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è
- **üöÄ FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- pip (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone https://github.com/Mooncore-inc/Event-Horizon-host.git
cd Event-Horizon-host
```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
python -m app.main
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite+aiosqlite:///./database.db

# –°–µ—Ä–≤–µ—Ä
HOST=0.0.0.0
PORT=8000

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO
DEBUG=false

# JWT –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Rate limiting
RATE_LIMIT_PER_MINUTE=100

# –†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)
KEY_ROTATION_INTERVAL_HOURS=24
MAX_PREVIOUS_KEYS=3
```

**üîí –í–ê–ñ–ù–û –ü–û –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò:**
- **SECRET_KEY –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ
- **–ù–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω** —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- **–ù–µ—Ç API endpoints** –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —Å–º–µ–Ω—ã –∫–ª—é—á–µ–π

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üîë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–∞–º–∏

#### –û–±–º–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º
```http
POST /api/v1/keys/exchange
Content-Type: application/json

{
  "did": "did:example:user123",
  "public_key": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "message": "Public key saved successfully",
  "did": "did:example:user123",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
```http
GET /api/v1/keys/{did}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "did": "did:example:user123",
  "public_key": "-----BEGIN PUBLIC KEY-----\n...\n-----END PUBLIC KEY-----",
  "last_updated": "2024-01-01T12:00:00Z"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ JWT —Ç–æ–∫–µ–Ω–∞ –¥–ª—è WebSocket
```http
POST /api/v1/keys/{did}/token
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "token_type": "bearer",
  "expires_in": 1800,
  "did": "did:example:user123"
}
```

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HMAC –ø–æ–¥–ø–∏—Å–∏ –¥–ª—è WebSocket
```http
POST /api/v1/keys/{did}/signature
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "signature": "a1b2c3d4e5f6...",
  "timestamp": "2024-01-01T12:00:00Z",
  "did": "did:example:user123",
  "expires_in": 300
}
```

#### –û—Ç–∑—ã–≤ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
```http
DELETE /api/v1/keys/{did}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "message": "Public key revoked successfully",
  "did": "did:example:user123",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

#### –û—Ç–∑—ã–≤ JWT —Ç–æ–∫–µ–Ω–∞
```http
POST /api/v1/keys/{did}/revoke-token
Content-Type: application/json

{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

#### Blacklist JWT —Ç–æ–∫–µ–Ω–∞
```http
POST /api/v1/keys/{did}/blacklist-token
Content-Type: application/json

{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–∫–µ–Ω–µ
```http
POST /api/v1/keys/{did}/token-info
Content-Type: application/json

{
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "did": "did:example:user123",
  "issued_at": "2024-01-01T12:00:00Z",
  "expires_at": "2024-01-01T12:30:00Z",
  "time_until_exp": 1800,
  "is_expired": false,
  "is_revoked": false,
  "is_blacklisted": false,
  "token_type": "access",
  "jti": "token_a1b2c3d4e5f6..."
}
```

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–æ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
```http
GET /api/v1/keys/key-rotation/info
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "key_rotation": {
    "current_key_hash": "a1b2c3d4e5f6...",
    "last_rotation": "2024-01-01T12:00:00Z",
    "next_rotation": "2024-01-02T12:00:00Z",
    "rotation_interval_hours": 24,
    "previous_keys_count": 2,
    "total_keys_managed": 3
  },
  "timestamp": "2024-01-01T12:00:00Z"
}
```

**üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π –æ—Ç–∫–ª—é—á–µ–Ω–∞**
- **–ù–µ—Ç API endpoints** –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π —Å–º–µ–Ω—ã –∫–ª—é—á–µ–π
- **–†–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
- **–≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∞—Ç–∞–∫–∏** –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–æ–≤ –Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é —Å–º–µ–Ω—É –∫–ª—é—á–µ–π

### üí¨ –°–æ–æ–±—â–µ–Ω–∏—è

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
```http
POST /api/v1/messages/send
Content-Type: application/json

{
  "sender_did": "did:example:sender123",
  "recipient_did": "did:example:recipient456",
  "encrypted_key": "base64_encoded_encrypted_symmetric_key",
  "iv": "base64_encoded_initialization_vector",
  "ciphertext": "base64_encoded_encrypted_message"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "id": "uuid-message-id",
  "sender_did": "did:example:sender123",
  "recipient_did": "did:example:recipient456",
  "encrypted_key": "base64_encoded_encrypted_symmetric_key",
  "iv": "base64_encoded_initialization_vector",
  "ciphertext": "base64_encoded_encrypted_message",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
GET /api/v1/messages/{did}?limit=50&offset=0
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "messages": [
    {
      "id": "uuid-message-id",
      "sender_did": "did:example:sender123",
      "recipient_did": "did:example:recipient456",
      "encrypted_key": "...",
      "iv": "...",
      "ciphertext": "...",
      "timestamp": "2024-01-01T12:00:00Z"
    }
  ],
  "total": 1,
  "limit": 50,
  "offset": 0
}
```

### üåê WebSocket

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket
```javascript
const ws = new WebSocket('ws://localhost:8000/ws/did:example:user123');

ws.onopen = function() {
    console.log('Connected to Event Horizon Chat');
};

ws.onmessage = function(event) {
    const message = JSON.parse(event.data);
    console.log('Received:', message);
};
```

#### –¢–∏–ø—ã WebSocket —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
```json
{
  "type": "welcome",
  "data": {
    "message": "Welcome to Event Horizon Chat!",
    "did": "did:example:user123",
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

**Heartbeat:**
```json
{
  "type": "heartbeat",
  "data": {
    "timestamp": "2024-01-01T12:00:00Z"
  }
}
```

**–ü—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
```json
{
  "type": "private_message",
  "sender_did": "did:example:sender123",
  "recipient_did": "did:example:recipient456",
  "encrypted_key": "...",
  "iv": "...",
  "ciphertext": "...",
  "timestamp": "2024-01-01T12:00:00Z"
}
```

### üè• –°–∏—Å—Ç–µ–º–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```http
GET /api/v1/system/health
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "timestamp": "2024-01-01T12:00:00Z",
  "version": "1.0.0",
  "database": "connected"
}
```

#### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
```http
GET /api/v1/system/info
```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

#### –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã
```http
GET /api/v1/stats/overview
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "timestamp": "2024-01-01T12:00:00Z",
  "users": {
    "total": 150,
    "connected": 45,
    "online_percentage": 30.0
  },
  "messages": {
    "total": 1250,
    "last_24h": 89,
    "rate_per_hour": 3.71
  },
  "system": {
    "status": "healthy",
    "uptime": "running"
  }
}
```

#### –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```http
GET /api/v1/stats/users/activity
```

#### –¢—Ä–µ–Ω–¥—ã —Å–æ–æ–±—â–µ–Ω–∏–π
```http
GET /api/v1/stats/messages/trends
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ

- **End-to-End —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —à–∏—Ñ—Ä—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞—Ö
- **–ì–∏–±—Ä–∏–¥–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ** - –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ –∏ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- **DID-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Public Key Infrastructure** - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω –∫–ª—é—á–∞–º–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –¥–ª—è –≤–∞—à–∏—Ö –¥–æ–º–µ–Ω–æ–≤**
3. **SECRET_KEY –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
4. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ API –ø–æ IP –∞–¥—Ä–µ—Å–∞–º**
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
6. **–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è WebSocket

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç–æ–¥–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:

#### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å JWT —Ç–æ–∫–µ–Ω–æ–≤

**–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∑–∞—â–∏—Ç–∞:**
- **–ü–æ–¥–ø–∏—Å—å —Ç–æ–∫–µ–Ω–∞** - –∫–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –ø–æ–¥–ø–∏—Å–∞–Ω —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º
- **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏** - —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—Ç–µ–∫–∞—é—Ç
- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID** - –∫–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (JTI)
- **Blacklist** - —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –º–æ–∂–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞
- **Revoke** - —Ç–æ–∫–µ–Ω—ã –º–æ–∂–Ω–æ –æ—Ç–æ–∑–≤–∞—Ç—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞** - –∏—Å—Ç–µ–∫—à–∏–µ —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏

**–ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–º–µ–Ω—ã:**
- –î–∞–∂–µ –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–∫—Ä–∞–¥–µ–Ω –∏–∑ –ë–î, –µ–≥–æ –Ω–µ–ª—å–∑—è –ø–æ–¥–¥–µ–ª–∞—Ç—å –±–µ–∑ –∑–Ω–∞–Ω–∏—è `SECRET_KEY`
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `SECRET_KEY` –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–∫–µ–Ω—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏
- –ö–∞–∂–¥—ã–π —Ç–æ–∫–µ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ

#### üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è SECRET_KEY

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞** –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –∫–ª—é—á–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –∫–ª—é—á –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ —Å—Ç–æ–π–∫–∏–µ –∫–ª—é—á–∏
- **–ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞** - —Å—Ç–∞—Ä—ã–µ –∫–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
- **–ù–µ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞** - —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏:**
- –í—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã
- **–°–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö**
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞–∑—Ä—ã–≤–∞—é—Ç—Å—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)

#### JWT —Ç–æ–∫–µ–Ω
```javascript
const ws = new WebSocket('ws://localhost:8000/ws/did:example:user123?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...');
```

#### HMAC –ø–æ–¥–ø–∏—Å—å
```javascript
const ws = new WebSocket('ws://localhost:8000/ws/did:example:user123?signature=a1b2c3d4e5f6...&timestamp=2024-01-01T12:00:00Z');
```

#### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Ç–æ–ª—å–∫–æ –≤ DEBUG —Ä–µ–∂–∏–º–µ)
```javascript
const ws = new WebSocket('ws://localhost:8000/ws/did:example:user123');
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç:
- –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã
- WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ú–µ—Ç—Ä–∏–∫–∏

- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
- –°—Ç–∞—Ç—É—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –¢—Ä–µ–Ω–¥—ã —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω
- –°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
pytest
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å coverage
```bash
pytest --cov=app
```

### –ü—Ä–æ—Å—Ç–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
python test_api.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints –∏ –≤—ã–≤–µ–¥–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ JWT
```bash
python security_demo.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ JWT —Ç–æ–∫–µ–Ω–æ–≤, –≤–∫–ª—é—á–∞—è –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–¥–º–µ–Ω—ã.

### –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—Ç–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
```bash
python key_rotation_demo.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–æ—Ç–∞—Ü–∏—é SECRET_KEY –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ –∏ –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ GNU GPLv3 ‚Äî —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

---

**Event Horizon Chat** - –≥–¥–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —Å –ø—Ä–æ—Å—Ç–æ—Ç–æ–π! üöÄüîê